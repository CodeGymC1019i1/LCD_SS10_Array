<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style type="text/css">
        table {
            border: 1px solid black;
            font-size: 30px;
            text-align: center;
        }
        td {
            border: 1px solid black;
            width: 50px;
            height: 50px;
        }
    </style>
</head>
<body>
<script type="text/javascript">
    let status = "x";
    // Vẽ bảng
    function drawBoard(N) {
        let boardNew = "<table>";
        for (let i = 0; i < N; i++) {
            boardNew += "<tr>";
            for (let j = 0; j < N; j++) {
                boardNew += "<td id='id" + i + j + "' onclick='displayXO(this.id,"+i+","+j+");'></td>";
            }
            boardNew += "</tr>";
        }
        boardNew += "</table>";
        document.write(boardNew);
    }
    //thay đổi dấu X, O:
    function displayXO(idOfCell,i,j) {
        if(document.getElementById(idOfCell).innerHTML=="")
            document.getElementById(idOfCell).innerHTML = status;
        if (status == "x") {
            status = "o";
        } else {
            status = "x";
        }
        checkWin(i,j);
    }

    function checkWin(xPosition,yPosition){
        count=1;
        i=xPosition;
        j=yPosition;
        let value=document.getElementById("id"+i+j).innerHTML;
        //Xet tren hang i
        while(document.getElementById("id"+i+(j+1)).innerHTML==value){
            count++;
            if(count==5){
                alert("Winner!!!!");
                return true;
            }
            j++;
        }
        i=xPosition;
        j=yPosition;
        while(document.getElementById("id"+i+(j-1)).innerHTML==value){
            count++;
            if(count==5){
                alert("Winner!!!!");
                return true;
            }
            j--;
        }
        //Xet theo cot
        count=1;
        i=xPosition;
        j=yPosition;
        while(document.getElementById("id"+(i+1)+j).innerHTML==value){
            count++;
            if(count==5){
                alert("Winner!!!!");
                return true;
            }
            i++;
        }
        i=xPosition;
        j=yPosition;
        while(document.getElementById("id"+(i-1)+j).innerHTML==value){
            count++;
            if (count != 5) {
                i--;
            } else {
                alert("Winner!!!!");
                return true;
                break;
            }
        }
        //Cheo phai
        count=1;
        i=xPosition;
        j=yPosition;
        while(document.getElementById("id"+(i-1)+(j+1)).innerHTML==value){
            //alert(document.getElementById("id"+(i-1)+(j+1)).innerHTML);
            count++;
            if(count==5){
                alert("Winner!!!!");
                return true;
                break;
            }
            i--;
            j++;
        }
        i=xPosition;
        j=yPosition;
        while(document.getElementById("id"+(i+1)+(j-1)).innerHTML==value){
            count++;
            if(count==5){
                alert("Winner!!!!");
                return true;
                break;
            }
            i++;
            j--;
        }
//Tu viet cheo trai
    }
    drawBoard(9);
</script>

</body>
</html>