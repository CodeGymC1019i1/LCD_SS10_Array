<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style type="text/css">
        table {
            border: 1px solid black;
            font-size: 30px;
            text-align: center;
        }
        td {
            border: 1px solid black;
            width: 50px;
            height: 50px;
        }
    </style>
</head>
<body>
<script type="text/javascript">
    let status = "o";
    function drawBoard(N) {
        let string = "<table>";
        for (let i = 0; i < N; i++) {
            string += "<tr>";
            for (let j = 0; j < N; j++) {
                string += "<td id='id" + i + j + "' onclick='displayXO(this.id,"+i+","+j+");'></td>";
            }
            string += "</tr>";
        }
        string += "</table>";
        document.write(string);
    }
    function displayXO(idOfCell,i,j) {
        if (document.getElementById(idOfCell).innerHTML == "") {
            if (status == "o") {
                status = "x";
            } else {
                status = "o";
            }
            document.getElementById(idOfCell).innerHTML = status;

        }
        console.log(status);
        checkWin(i,j);
    }
    function checkWin(xPosition,yPosition){
        count=1;
        i=xPosition;
        j=yPosition;
        let value=document.getElementById("id"+i+j).innerHTML;
        //Xet tren hang i
        while((j+1)<9&&document.getElementById("id"+i+(j+1)).innerHTML==value){
            count++;
            if(count==5){
                alert("Winner!!!!");
                return true;
            }
            j++;
        }
        i=xPosition;
        j=yPosition;
        while((j-1)>=0&&document.getElementById("id"+i+(j-1)).innerHTML==value){
            count++;
            if(count==5){
                alert("Winner!!!!");
                return true;
            }
            j--;
        }
        //Xet theo cot
        count=1;
        i=xPosition;
        j=yPosition;
        while((i+1)<9&&document.getElementById("id"+(i+1)+j).innerHTML==value){
            count++;
            if(count==5){
                alert("Winner!!!!");
                return true;
            }
            i++;
        }
        i=xPosition;
        j=yPosition;
        while((i-1)>=0&&document.getElementById("id"+(i-1)+j).innerHTML==value){
            count++;
            if(count==5){
                alert("Winner!!!!");
                return true;
            }
            i--;
        }
        //Cheo phai
        count=1;
        i=xPosition;
        j=yPosition;
        while((i-1)>=0&&(j+1)<9&&document.getElementById("id"+(i-1)+(j+1)).innerHTML==value){
            count++;
            if(count==5){
                alert("Winner!!!!");
                return true;
            }
            i--;
            j++;
        }
        i=xPosition;
        j=yPosition;
        while((i+1)<9&&(j-1)>=0&&document.getElementById("id"+(i+1)+(j-1)).innerHTML==value){
            count++;
            if(count==5){
                alert("Winner!!!!");
                return true;
            }
            i++;
            j--;
        }
//Tu viet cheo trai
        count=1;
        i=xPosition;
        j=yPosition;
        while((i-1)>=0&&(j-1)>=0&&document.getElementById("id"+(i-1)+(j-1)).innerHTML==value){
            count++;
            if(count==5){
                alert("Winner!!!!");
                return true;
            }
            i--;
            j--;
        }
        i=xPosition;
        j=yPosition;
        while((i+1)<9&&(j+1)<9&&document.getElementById("id"+(i+1)+(j+1)).innerHTML==value){
            count++;
            if(count==5){
                alert("Winner!!!!");
                return true;
            }
            i++;
            j++;
        }

    }
    drawBoard(9);
</script>

</body>
</html>